# J003-Java面向对象

### 抽象

- 抽象是将一类事物（对象）**抽取共性**构造类的过程，包括**数据抽象**和**行为抽象**两方面。
抽象只关注对象有哪些**属性**和**行为**，并不关注这些行为的细节是什么。

### 封装

- 封装是把对象的属性私有化，同时提供一些可以被外界访问的属性的方法。

> 如果属性不想被外界访问，我们大可不必提供方法给外界访问。但是如果一个类没有提供给外界访问的方法，那么这个类也没有什么意义了。

### 继承

- 继承是在已有类的基础上创建新的类（子类），通过继承创建的新类称为“子类”或“派生类”，被继承的类称为“基类”、“父类”或“超类”。
- 通过继承，子类可以使用父类的非 `private` 功能，并且可以按自己的方式对这些功能进行扩展。

关于继承如下 3 点请记住：

> - **子类拥有父类对象所有的属性和方法，只是子类无法访问父类中的私有属性和方法。**
> - 子类可以拥有自己属性和方法，即子类可以对父类进行扩展。  
> - 子类可以用自己的方式重写父类的方法。

### 多态

- 多态是指程序中定义的**引用变量所指向的具体类型**和**通过该引用变量发出的方法调用在编译时并不确定**，而是在**程序运行期间才确定**。
- 简而言之就是**父类或接口的引用变量指向子类或具体实现类的实例对象**。
- 优点：提高了程序的拓展性。

#### Java 中多态需要满足的条件

需要满足三个条件：
-   有类继承或者接口实现
-   子类要重写父类的方法 | 实现类实现接口方法
-   父类引用指向子类对象 | 接口引用指向实现类对象

### 访问控制修饰符

Java中，可以使用访问控制符来保护对类、变量、方法和构造方法的访问。
Java 支持 4 种不同的访问权限。

- `public` : 对所有类可见。使用对象：类、接口、变量、方法
- `protected` : 对同一包内的类和所有子类可见。使用对象：变量、方法。 **注意：不能修饰外部类）**。
- `default` (即默认，什么也不写）: 在同一包内可见，不使用任何修饰符。使用对象：类、接口、变量、方法。
- `private` : 在同一类内可见。使用对象：变量、方法。 **注意：不能外部类）**

我们可以通过以下表来说明访问权限：

![访问控制修饰符](imgs/访问控制修饰符.png)

### 抽象类和抽象方法

#### 抽象类
- 用 `abstract` 修饰的类

##### 抽象类-注意事项
- 如果某个类中包**含有抽象方法**那么该类**必须定义为抽象类** ，但是**抽象类不一定有抽象方法**
- 抽象类不能直接实例化，只能用来继承，但可以有构造方法、成员属性 和 非抽象成员方法
- 派生类必须实现其父类中的所有抽象方法，否则派生类也必须声明为抽象类

#### 抽象方法
- 用 `abstract` 修饰的方法（声明但未定义的方法，只有方法签名没有方法体）
- 以下方法不能抽象
	- 构造方法(构造器)
	- 静态方法(`static` 修饰的方法)
	- 私有方法(`private` 修饰的方法)
	- 不可变方法(`final` 修饰的方法)

### 接口

#### 接口的概念
- 接口是用关键 `interface` 字声明，是一系列抽象方法的集合。
> 接口就是特殊的抽象类，即所有的方法都是抽象方法的抽象类

#### 接口-注意事项
1.  接口中的变量默认是 `public static final` 修饰的 —— 静态常量
2.  接口中的方法默认是 `public abstract` 修饰的 —— 抽象方法
3.  接口也不能直接实例化，只能用来继承(`extends`)或实现（`implement`）
4.  Java 中类只能单一继承，但可以实现多个接口；接口可以继承多个接口。
6.  一个类实现接口时必须实现接口中所有的抽象方法，否则这个类只能声明为抽象类。

#### Java 中接⼝的变化：
1.  在 *Java 7* 或更早版本中，接⼝⾥⾯只能有常量变量和抽象⽅法。这些接⼝⽅法必须由选择实现接⼝的类实现。
2.  *Java 8* 的时候接⼝可以有默认⽅法和静态⽅法功能。
	- 如果同时实现两个接口，这两个接口中定义了一样的默认方法，则必须重写。
	- 静态方法只能被接口类直接调用（不能被实现类的对象调用）
1.  *Java 9* 在接⼝中引⼊了私有⽅法和私有静态⽅法。

###  接口和抽象类的区别

- 接口强调特定功能的实现，而抽象类强调所属关系
- 实现接口的关键字为 `implements`，继承抽象类的关键字为 `extends`
- 一个类可以实现多个接口，但一个类只能继承一个抽象类
- 抽象类可以有构造方法, 接口没有构造方法
- 抽象类可以有普通成员变量, 接口没有普通成员变量
- 接口方法默认修饰符是 `public`，抽象方法可以有 `public`、`protected` 和 `default` 这些修饰符（抽象方法就是为了被重写所以不能使用 `private` 关键字修饰！）


内部类？

在 `Java` 中，可以将一个类的定义放在另外一个类的定义内部，这就是**内部类**。内部类本身就是类的一个属性，与其他属性定义方式一致。

### 内部类

####  内部类的分类：

 内部类可以分为四种：
- 成员内部类：定义在类内部的静态类，就是静态内部类。
	- 静态内部类可以访问外部类所有的静态变量，而不可访问外部类的非静态变量；
	- 静态内部类的创建方式，`new 外部类.静态内部类()`
- 局部内部类：定义在类内部，成员位置上的非静态类，就是成员内部类。
	- 成员内部类可以访问外部类所有的变量和方法，包括静态和非静态，私有和公有；
	- 成员内部类依赖于外部类的实例，它的创建方式`外部类实例.new 内部类()`
- 匿名内部类：定义在方法中的内部类，就是局部内部类。
	- 定义在实例方法中的局部类可以访问外部类的所有变量和方法；
	- 定义在静态方法中的局部类只能访问外部类的静态变量和方法；
	- 局部内部类的创建方式，在对应方法内，`new 内部类()`
- 静态内部类：匿名内部类就是没有名字的内部类，日常开发中使用的比较多。
	- 匿名内部类必须继承一个抽象类或者实现一个接口。
	- 匿名内部类不能定义任何静态成员和静态方法。 
	- 当所在的方法的形参需要被匿名内部类使用时，必须声明为 `final`。 
	- 匿名内部类不能是抽象的，它必须要实现继承的类或者实现的接口的所有抽象方法。
	- 静态内部类的创建方式，在对应方法内，`new 类/接口{ }`

#### 为什么要使用内部类

-   一个内部类对象可以访问创建它的外部类对象的内容，包括私有数据！
-   内部类不为同一包的其他类所见，具有很好的封装性；
-   内部类有效实现了“多重继承”，优化 java 单继承的缺陷。
-   匿名内部类可以很方便的定义回调。

#### 内部类有哪些应用场景

-   一些多算法场合 
-   解决一些非面向对象的语句块。
-   适当使用内部类，使得代码更加灵活和富有扩展性。
-   当某个类除了它的外部类，不再被其他的类使用时。